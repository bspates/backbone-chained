(function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Backbone.Chained={},Backbone.Chained.Router=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.views={},c.prototype.defaultView=null,c.prototype.routes={"*splat":"chain"},c.prototype.chain=function(a){var b,c,d,e;if(null==a){if(null==this.defaultView)return this.notFound();e=this.defaultView}else{if(c=a.split("/"),void 0===c)return this.notFound();b=c.shift(),e=_.find(this.views,function(a){return a.fragment===b})}return void 0===e||null==e?this.notFound():(d=e.handle(c),d?void 0:this.notFound())},c.prototype.notFound=function(){return $("body").html("Page Not Found")},c}(Backbone.Router),Backbone.Chained.View=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.fragment=null,c.prototype.childViews=[],c.prototype.handle=function(a){var b,c,d,e,f;return d=this.beforeHandle(a||a),a.length?null!=this.childViews&&(b=_.values(this.childViews),b.length&&(c=a.shift(),f=_.find(b,function(a){return a.fragment===c}),f&&(e=f.handle(a)),e))?(this.afterHandle(),e):(this.afterHandle(),this.onBadRoute()):(this.afterHandle,!0)},c.prototype.afterHandle=function(){},c.prototype.beforeHandle=function(){},c.prototype.onBadRoute=function(){return!1},c}(Backbone.View)}).call(this);